# Driving through the world

## Visualising the map
We've been running previews through Carla's default [Map10](https://carla.readthedocs.io/en/latest/map_town10/).

Creating a route from spawn point 1 to spawn point 10, based on an aerial snapshot + OpenDRIVE lanes:

![Map aerial + lanes](../data/illustrations/route_plot_Town10HD.png)

## Basic Agent driving

Importing the BasicAgent from the Carla repo, we get routing and driving behaviour based on the simulation. 

Let's break down the behaviour:
The `GlobalRoutePlanner` plans a high level route between 2 points.

![Map Global Route](../data/illustrations/route_plot_Town10HD_grp.png)

The `LocalRoutePlanner` handles driving to the next waypoint, creating the actual vehicle controls:
- throttle for pressing the gas pedal (0 - 1) 
- brake for pressing the break pedal (0 - 1)
- steer for the steering wheel angle

We can use the Heads Up Display from the pygame setup of the scene to visualise what the local route planner decides at each point in time:

![HUD For car actions](../data/illustrations/closed_loop_hud.png)

I ran into some issues getting consistent behaviour when rendering an itinirerary vs the basic_agent drive. It seems `load_world()` and `get_world()` have different spawn points lists.

![Drive gif](../data/illustrations/closed_loop.gif)

[Closed loop drive with HUD (MP4)](../data/illustrations/closed_loop.mp4)

Turns are a challenge here, rapidly switching between throttle and break in a way that is not efficient, or mechanically feasible.